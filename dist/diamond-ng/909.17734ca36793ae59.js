"use strict";(self.webpackChunkdiamond_ng=self.webpackChunkdiamond_ng||[]).push([[909],{3909:(W,P,r)=>{r.r(P),r.d(P,{ProcesosModule:()=>$});var d=r(6814),b=r(5233),f=r(7664),o=r(5849),p=r(6306),u=r(8504),g=r(8541),a=r(95),x=r(4532),l=r(5219),M=r(6023),m=r(707),T=r(8528),C=r(3714),v=r(6218),_=r(4584),Z=r(3259);function A(t,c){1&t&&(o.TgZ(0,"small",10)(1,"b"),o._uU(2,"Favor ingresar una descripci\xf3n"),o.qZA()())}function w(t,c){1&t&&(o.TgZ(0,"small",10)(1,"b"),o._uU(2,"Favor ingresar un c\xf3digo"),o.qZA()())}function y(t,c){1&t&&(o.TgZ(0,"small",10)(1,"b"),o._uU(2,"Favor ingresar un limite de tiempo (en minutos)"),o.qZA()())}function J(t,c){if(1&t){const e=o.EpF();o.TgZ(0,"div",5)(1,"div",6)(2,"span",7)(3,"textarea",8),o.NdJ("ngModelChange",function(i){o.CHM(e);const n=o.oxw();return o.KtG(n.descripcionProceso=i)}),o.qZA(),o.TgZ(4,"label",9),o._uU(5,"Descripci\xf3n "),o.TgZ(6,"small",10)(7,"b"),o._uU(8," *"),o.qZA()()()(),o.YNc(9,A,3,0,"small",11),o.qZA(),o.TgZ(10,"div",6)(11,"span",7)(12,"input",12,13),o.NdJ("keyup",function(){o.CHM(e);const i=o.MAs(13),n=o.oxw();return o.KtG(n.setCodigo(i.value))}),o.qZA(),o.TgZ(14,"label",14),o._uU(15,"Codigo proceso "),o.TgZ(16,"small",10)(17,"b"),o._uU(18," *"),o.qZA()()()(),o.YNc(19,w,3,0,"small",11),o.qZA(),o.TgZ(20,"div",6)(21,"span",7)(22,"input",15,16),o.NdJ("keyup",function(){o.CHM(e);const i=o.MAs(23),n=o.oxw();return o.KtG(n.setTiempo(i.value))}),o.qZA(),o.TgZ(24,"label",17),o._uU(25,"Limite de tiempo "),o.TgZ(26,"small",10)(27,"b"),o._uU(28," *"),o.qZA()()()(),o.YNc(29,y,3,0,"small",11),o.qZA()()}if(2&t){const e=o.oxw();o.xp6(3),o.Q6J("ngModel",e.descripcionProceso),o.xp6(6),o.Q6J("ngIf",(null==e.descripcionProceso||""==e.descripcionProceso)&&e.formularioCompleto),o.xp6(3),o.Q6J("value",e.codigoProceso),o.xp6(7),o.Q6J("ngIf",(null==e.codigoProceso||null==e.codigoProceso||""==e.codigoProceso)&&e.formularioCompleto),o.xp6(3),o.Q6J("value",e.tiempoMinutos),o.xp6(7),o.Q6J("ngIf",(null==e.tiempoMinutos||null==e.tiempoMinutos||""==e.tiempoMinutos)&&e.formularioCompleto)}}function E(t,c){if(1&t){const e=o.EpF();o.TgZ(0,"p-button",18),o.NdJ("click",function(){o.CHM(e);const i=o.oxw();return o.KtG(i.actualizarProceso())}),o.qZA(),o.TgZ(1,"p-button",19),o.NdJ("click",function(){o.CHM(e);const i=o.oxw();return o.KtG(i.showDialog())}),o.qZA()}}const q=()=>({width:"600px",height:"500px"});let N=(()=>{class t{constructor(e){this.procesosService=e,this.showProcesoDialog=!1,this.Proceso=(0,o.tdS)(null),this.formularioCompleto=!1,this.showProceso=!1,this.actualizarPadre=new o.vpe}ngOnInit(){}obtenerProcesos(){this.showProceso=!0,this.procesosService.getProceso(this.idProceso).pipe((0,p.K)(e=>{const s=e.status;return("400"==s||"404"==s||"500"==s)&&console.log("EERROR"),this.showProceso=!1,(0,u._)(e.statusText)})).subscribe(e=>{this.descripcionProceso=null!=e.respuesta.datos.descripcion?e.respuesta.datos.descripcion:"",this.codigoProceso=null!=e.respuesta.datos.codigo?e.respuesta.datos.codigo:"",this.tiempoMinutos=e.respuesta.datos.tiempoMinutos?e.respuesta.datos.tiempoMinutos.toString():"0",this.showProceso=!1,this.showProcesoDialog=!0})}actualizarProceso(){if(this.showProceso=!0,this.formularioCompleto=!1,null!=this.descripcionProceso&&""!=this.descripcionProceso&&null!=this.codigoProceso&&null!=this.codigoProceso&&""!=this.codigoProceso&&""!=this.tiempoMinutos){this.formularioCompleto=!1;let e={id:this.idProceso,codigo:this.codigoProceso,descripcion:this.descripcionProceso,tiempoMinutos:parseFloat(this.tiempoMinutos)};this.procesosService.updateProceso(e).pipe((0,p.K)(s=>{const i=s.status;return("400"==i||"404"==i||"500"==i)&&console.log("EERROR"),this.showProceso=!1,(0,u._)(s.statusText)})).subscribe(s=>{this.descripcionProceso="",this.codigoProceso="",this.tiempoMinutos="",this.showProceso=!1,this.showProcesoDialog=!1,this.actualizarPadre.emit()})}else this.formularioCompleto=!0}setCodigo(e){this.codigoProceso=e}setTiempo(e){this.tiempoMinutos=e}showDialog(){this.showProcesoDialog=!this.showProcesoDialog}static#o=this.\u0275fac=function(s){return new(s||t)(o.Y36(g.u))};static#e=this.\u0275cmp=o.Xpm({type:t,selectors:[["editar-proceso"]],inputs:{idProceso:"idProceso"},outputs:{actualizarPadre:"actualizarPadre"},decls:5,vars:10,consts:[[3,"hidden"],["pTooltip","Editar proceso","icon","pi pi-pencil","severity","success",3,"disabled","onClick"],["header","Editar proceso",3,"visible","modal","responsive","draggable","resizable","visibleChange"],["pTemplate","body"],["pTemplate","footer"],[1,"p-fluid","p-formgrid","grid","mt-2"],[1,"field","col-12"],[1,"p-float-label"],["rows","5","cols","30","pInputTextarea","","id","descripcion",3,"ngModel","ngModelChange"],["for","descripcion",1,"mb-2"],[2,"color","red"],["style","color:red",4,"ngIf"],["id","codigoProcesoInput","type","text","required","","pInputText","",3,"value","keyup"],["codigoProcesoInput",""],["for","codigoProcesoInput",1,"mb-2"],["id","tiempoMinutosInput","type","number","required","","pInputText","",3,"value","keyup"],["tiempoMinutosInput",""],["for","tiempoMinutosInput",1,"mb-2"],["icon","pi pi-save","label","Guardar","severity","success",3,"click"],["icon","pi pi-times","label","Cancelar","severity","danger",3,"click"]],template:function(s,i){1&s&&(o._UZ(0,"shared-loader",0),o.TgZ(1,"p-button",1),o.NdJ("onClick",function(){return i.obtenerProcesos()}),o.qZA(),o.TgZ(2,"p-dialog",2),o.NdJ("visibleChange",function(h){return i.showProcesoDialog=h}),o.YNc(3,J,30,6,"ng-template",3)(4,E,2,0,"ng-template",4),o.qZA()),2&s&&(o.Q6J("hidden",!i.showProceso),o.xp6(1),o.Q6J("disabled",null==i.idProceso),o.xp6(1),o.Akn(o.DdM(9,q)),o.Q6J("visible",i.showProcesoDialog)("modal",!0)("responsive",!0)("draggable",!1)("resizable",!1))},dependencies:[d.O5,l.jx,m.zx,Z.u,T.V,C.o,v.g,a.Fj,a.JJ,a.On,_.R]})}return t})();var F=r(3904),U=r(7018);function I(t,c){if(1&t&&(o.TgZ(0,"div",3),o._UZ(1,"i",4),o.TgZ(2,"p"),o._uU(3),o.qZA()()),2&t){const e=c.$implicit;o.xp6(3),o.Oqu(e.message)}}let D=(()=>{class t{constructor(e,s,i){this.procesosService=e,this.confirmationService=s,this.messageService=i,this.showProcesoDialog=!1,this.showProceso=!1,this.actualizarPadre=new o.vpe}obtenerProcesos(){}confirm(){this.confirmationService.confirm({header:"Eliminar proceso",message:"\xbfDesea eliminar el proceso?",acceptIcon:"pi pi-check mr-2",rejectIcon:"pi pi-times mr-2",rejectButtonStyleClass:"p-button-danger p-button-sm ",acceptLabel:"Si",rejectLabel:"No",acceptButtonStyleClass:"p-button-success p-button-sm ",accept:()=>{this.eliminarProceso()},reject:()=>{this.messageService.add({severity:"error",summary:"Operaci\xf3n cancelada",detail:"No se ha eliminado el proceso",life:3e3})}})}eliminarProceso(){this.showProceso=!0,this.procesosService.deleteProceso(this.idProceso).pipe((0,p.K)(e=>{const s=e.status;return("400"==s||"404"==s||"500"==s)&&(console.log("EERROR"),this.messageService.add({severity:"error",summary:"Error al eliminar el proceso",detail:"Favor contactar al departamento correspondiente"})),this.showProceso=!1,(0,u._)(e.statusText)})).subscribe(e=>{this.messageService.add({severity:"success",summary:"Proceso eliminado",detail:"Proceso eliminado correctamente",life:3e3}),this.showProceso=!1,setTimeout(()=>{this.showProcesoDialog=!0,this.actualizarPadre.emit()},3e3)})}static#o=this.\u0275fac=function(s){return new(s||t)(o.Y36(g.u),o.Y36(l.YP),o.Y36(l.ez))};static#e=this.\u0275cmp=o.Xpm({type:t,selectors:[["eliminar-proceso"]],inputs:{idProceso:"idProceso"},outputs:{actualizarPadre:"actualizarPadre"},features:[o._Bn([l.YP,l.ez])],decls:5,vars:1,consts:[[3,"hidden"],["pTooltip","Eliminar proceso","icon","pi pi-trash","severity","danger",3,"onClick"],["pTemplate","message"],[1,"flex","flex-column","align-items-center","w-full","gap-3","border-bottom-1","surface-border"],[1,"pi","pi-exclamation-circle","text-6xl","text-primary-500"]],template:function(s,i){1&s&&(o._UZ(0,"shared-loader",0),o.TgZ(1,"p-button",1),o.NdJ("onClick",function(){return i.confirm()}),o.qZA(),o._UZ(2,"p-toast"),o.TgZ(3,"p-confirmDialog"),o.YNc(4,I,4,1,"ng-template",2),o.qZA()),2&s&&o.Q6J("hidden",!i.showProceso)},dependencies:[l.jx,m.zx,Z.u,F.Q,U.FN,_.R]})}return t})();function z(t,c){1&t&&(o.TgZ(0,"small",17)(1,"b"),o._uU(2,"Favor ingresar un nombre v\xe1lido"),o.qZA()())}function S(t,c){1&t&&(o.TgZ(0,"small",17)(1,"b"),o._uU(2,"Favor ingresar un c\xf3digo"),o.qZA()())}function k(t,c){1&t&&(o.TgZ(0,"small",17)(1,"b"),o._uU(2,"Favor ingresar un limite de tiempo (en minutos)"),o.qZA()())}function R(t,c){if(1&t){const e=o.EpF();o.TgZ(0,"div",12)(1,"div",13)(2,"span",14)(3,"textarea",15),o.NdJ("ngModelChange",function(i){o.CHM(e);const n=o.oxw();return o.KtG(n.descripcionProceso=i)}),o.qZA(),o.TgZ(4,"label",16),o._uU(5,"Nombre del proceso "),o.TgZ(6,"small",17)(7,"b"),o._uU(8," *"),o.qZA()()()(),o.YNc(9,z,3,0,"small",18),o.qZA(),o.TgZ(10,"div",13)(11,"span",14)(12,"input",19,20),o.NdJ("keyup",function(){o.CHM(e);const i=o.MAs(13),n=o.oxw();return o.KtG(n.setCodigo(i.value))}),o.qZA(),o.TgZ(14,"label",21),o._uU(15,"Codigo proceso "),o.TgZ(16,"small",17)(17,"b"),o._uU(18," *"),o.qZA()()()(),o.YNc(19,S,3,0,"small",18),o.qZA(),o.TgZ(20,"div",13)(21,"span",14)(22,"input",22,23),o.NdJ("keyup",function(){o.CHM(e);const i=o.MAs(23),n=o.oxw();return o.KtG(n.setTiempo(i.value))}),o.qZA(),o.TgZ(24,"label",24),o._uU(25,"Limite de tiempo "),o.TgZ(26,"small",17)(27,"b"),o._uU(28," *"),o.qZA()()()(),o.YNc(29,k,3,0,"small",18),o.qZA()()}if(2&t){const e=o.oxw();o.xp6(3),o.Q6J("ngModel",e.descripcionProceso),o.xp6(6),o.Q6J("ngIf",(null==e.descripcionProceso||""==e.descripcionProceso)&&e.formularioCompleto),o.xp6(10),o.Q6J("ngIf",(null==e.codigoProceso||null==e.codigoProceso)&&e.formularioCompleto),o.xp6(10),o.Q6J("ngIf",(null==e.tiempoMinutos||null==e.tiempoMinutos)&&e.formularioCompleto)}}function Q(t,c){if(1&t){const e=o.EpF();o.TgZ(0,"p-button",25),o.NdJ("click",function(){o.CHM(e);const i=o.oxw();return o.KtG(i.agregarProceso())}),o.qZA(),o.TgZ(1,"p-button",26),o.NdJ("click",function(){o.CHM(e);const i=o.oxw();return o.KtG(i.showDialog())}),o.qZA()}}function K(t,c){if(1&t){const e=o.EpF();o.TgZ(0,"div",27)(1,"button",28),o.NdJ("click",function(){o.CHM(e);const i=o.oxw(),n=o.MAs(10);return o.KtG(i.clear(n))}),o.qZA(),o.TgZ(2,"span",29),o._UZ(3,"i",30),o.TgZ(4,"input",31,32),o.NdJ("input",function(){o.CHM(e);const i=o.MAs(5);o.oxw();const n=o.MAs(10);return o.KtG(n.filterGlobal(i.value,"contains"))}),o.qZA()()()}}function O(t,c){1&t&&(o.TgZ(0,"tr")(1,"th"),o._uU(2,"C\xf3digo"),o.qZA(),o.TgZ(3,"th"),o._uU(4,"Nombre del proceso"),o.qZA(),o.TgZ(5,"th"),o._uU(6,"Operaciones"),o.qZA()())}function Y(t,c){if(1&t){const e=o.EpF();o.TgZ(0,"tr")(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td")(6,"editar-proceso",33),o.NdJ("actualizarPadre",function(){o.CHM(e);const i=o.oxw();return o.KtG(i.obtenerProcesos())}),o.qZA(),o._uU(7," \xa0 "),o.TgZ(8,"eliminar-proceso",33),o.NdJ("actualizarPadre",function(){o.CHM(e);const i=o.oxw();return o.KtG(i.obtenerProcesos())}),o.qZA()()()}if(2&t){const e=c.$implicit;o.xp6(2),o.Oqu(e.codigo),o.xp6(2),o.Oqu(e.descripcion),o.xp6(2),o.Q6J("idProceso",e.id),o.xp6(2),o.Q6J("idProceso",e.id)}}const G=()=>({width:"600px",height:"500px"}),H=()=>({"min-width":"50rem"}),j=()=>[5,10,20],B=()=>["codigo","descripcion","tiempoMinutos"],L=[{path:"",component:(()=>{class t{constructor(e,s){this.procesosService=e,this.fb=s,this.showProcesoDialog=!1,this.ProcesoList=(0,o.tdS)([]),this.formularioCompleto=!1,this.showProceso=!1}ngOnInit(){this.obtenerProcesos()}obtenerProcesos(){this.showProceso=!0,this.procesosService.getProcesos().pipe((0,p.K)(e=>{const s=e.status;return("400"==s||"404"==s||"500"==s)&&console.log("EERROR"),this.showProceso=!1,(0,u._)(e.statusText)})).subscribe(e=>{this.ProcesoList.set(e.respuesta.datos),this.showProceso=!1})}clear(e){e.clear()}agregarProceso(){if(this.showProceso=!0,this.formularioCompleto=!1,null!=this.descripcionProceso&&""!=this.descripcionProceso&&null!=this.codigoProceso&&null!=this.codigoProceso&&""!=this.codigoProceso&&null!=this.tiempoMinutos&&null!=this.tiempoMinutos&&""!=this.tiempoMinutos){this.formularioCompleto=!1,this.showProceso=!0;let e={codigo:this.codigoProceso,descripcion:this.descripcionProceso,tiempoMinutos:parseFloat(this.tiempoMinutos)};this.procesosService.postProceso(e).pipe((0,p.K)(s=>{const i=s.status;return("400"==i||"404"==i||"500"==i)&&console.log("EERROR"),this.showProceso=!1,(0,u._)(s.statusText)})).subscribe(s=>{this.obtenerProcesos(),this.showProceso=!1,this.descripcionProceso="",this.codigoProceso="",this.tiempoMinutos="",this.showProceso=!1,this.showDialog()})}else this.formularioCompleto=!0}setCodigo(e){this.codigoProceso=e}setTiempo(e){this.tiempoMinutos=e}showDialog(){this.showProcesoDialog=!this.showProcesoDialog}static#o=this.\u0275fac=function(s){return new(s||t)(o.Y36(g.u),o.Y36(a.qu))};static#e=this.\u0275cmp=o.Xpm({type:t,selectors:[["procesos"]],decls:14,vars:18,consts:[[3,"hidden"],["header","Procesos"],["header","Agregar proceso",3,"visible","modal","responsive","draggable","resizable","visibleChange"],["pTemplate","body"],["pTemplate","footer"],[1,"grid"],[1,"col-12"],["severity","success","label","Agregar proceso","icon","pi pi-plus",3,"onClick"],["currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords} procesos",3,"value","tableStyle","paginator","rowsPerPageOptions","rows","globalFilterFields"],["ProcesosTable",""],["pTemplate","caption"],["pTemplate","header"],[1,"p-fluid","p-formgrid","grid","mt-2"],[1,"field","col-12"],[1,"p-float-label"],["rows","5","cols","30","pInputTextarea","","id","descripcion",3,"ngModel","ngModelChange"],["for","descripcion",1,"mb-2"],[2,"color","red"],["style","color:red",4,"ngIf"],["id","codigoProcesoInput","type","text","required","","pInputText","",3,"keyup"],["codigoProcesoInput",""],["for","codigoProcesoInput",1,"mb-2"],["id","tiempoMinutosInput","type","number","required","","pInputText","",3,"keyup"],["tiempoMinutosInput",""],["for","tiempoMinutosInput",1,"mb-2"],["icon","pi pi-save","label","Guardar","severity","success",3,"click"],["icon","pi pi-times","label","Cancelar","severity","danger",3,"click"],[1,"flex"],["pButton","","label","Limpiar b\xfasqueda","icon","pi pi-filter-slash",1,"p-button-outlined",3,"click"],[1,"p-input-icon-left","ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar",3,"input"],["busquedaTabla",""],[3,"idProceso","actualizarPadre"]],template:function(s,i){1&s&&(o._UZ(0,"shared-loader",0),o.TgZ(1,"p-card",1)(2,"p-dialog",2),o.NdJ("visibleChange",function(h){return i.showProcesoDialog=h}),o.YNc(3,R,30,4,"ng-template",3)(4,Q,2,0,"ng-template",4),o.qZA(),o.TgZ(5,"div",5)(6,"div",6)(7,"p-button",7),o.NdJ("onClick",function(){return i.showDialog()}),o.qZA()(),o.TgZ(8,"div",6)(9,"p-table",8,9),o.YNc(11,K,6,0,"ng-template",10)(12,O,7,0,"ng-template",11)(13,Y,9,4,"ng-template",3),o.qZA()()()()),2&s&&(o.Q6J("hidden",!i.showProceso),o.xp6(2),o.Akn(o.DdM(14,G)),o.Q6J("visible",i.showProcesoDialog)("modal",!0)("responsive",!0)("draggable",!1)("resizable",!1),o.xp6(7),o.Q6J("value",i.ProcesoList())("tableStyle",o.DdM(15,H))("paginator",!0)("rowsPerPageOptions",o.DdM(16,j))("rows",10)("globalFilterFields",o.DdM(17,B)))},dependencies:[d.O5,x.Z,l.jx,M.iA,m.Hq,m.zx,T.V,C.o,v.g,a.Fj,a.JJ,a.On,_.R,N,D]})}return t})()}];let X=(()=>{class t{static#o=this.\u0275fac=function(s){return new(s||t)};static#e=this.\u0275mod=o.oAB({type:t});static#t=this.\u0275inj=o.cJS({imports:[f.Bz.forChild(L),f.Bz]})}return t})();var V=r(8137);let $=(()=>{class t{static#o=this.\u0275fac=function(s){return new(s||t)};static#e=this.\u0275mod=o.oAB({type:t});static#t=this.\u0275inj=o.cJS({imports:[d.ez,b.W,X,a.UX,V.m]})}return t})()}}]);