"use strict";(self.webpackChunkdiamond_ng=self.webpackChunkdiamond_ng||[]).push([[538],{4538:(ct,I,s)=>{s.r(I),s.d(I,{InductoresModule:()=>at});var v=s(6814),C=s(7664),w=s(5861),t=s(5849),r=s(6306),d=s(8504),u=s(9862);const m="gestioncostos/inductores/";var S=s(7053),M=s(459);const g=S.S;let _=(()=>{class o{constructor(e,i){this.http=e,this.cookieService=i}getInductores(){let e=this.cookieService.get("user_token");const i=new u.WM({"Content-Type":"application/json",Authorization:`Bearer ${e}`});return this.http.get(g+m,{headers:i})}getInductor(e){let i=this.cookieService.get("user_token");const n=new u.WM({"Content-Type":"application/json",Authorization:`Bearer ${i}`});return this.http.get(g+m+e,{headers:n})}postInductor(e){let i=this.cookieService.get("user_token");const n=new u.WM({"Content-Type":"application/json",Authorization:`Bearer ${i}`});return this.http.post(g+m,e,{headers:n})}updateInductor(e){let i=this.cookieService.get("user_token");const n=new u.WM({"Content-Type":"application/json",Authorization:`Bearer ${i}`});return this.http.put(g+m,e,{headers:n})}deleteInductor(e){let i={id:e},n=this.cookieService.get("user_token");const a=new u.WM({"Content-Type":"application/json",Authorization:`Bearer ${n}`});return this.http.delete(g+m,{body:i,headers:a})}static#t=this.\u0275fac=function(i){return new(i||o)(t.LFG(u.eN),t.LFG(M.N))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var T=s(7095),y=s(4532),l=s(5219),D=s(6023),h=s(707),b=s(8528),x=s(2352),J=s(3714),Z=s(6218),p=s(95),z=s(4584),A=s(3259);function N(o,c){1&o&&(t.TgZ(0,"small",12)(1,"b"),t._uU(2,"Favor seleccione una actividad"),t.qZA()())}function E(o,c){1&o&&(t.TgZ(0,"small",12)(1,"b"),t._uU(2,"Favor ingresar una descripci\xf3n"),t.qZA()())}const F=()=>({"min-width":"500px"});function P(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div",4)(1,"div",5)(2,"p-dropdown",6,7),t.NdJ("onChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.setActividad(n.value))}),t.qZA(),t.YNc(4,N,3,0,"small",8),t.qZA(),t.TgZ(5,"div",5)(6,"span",9)(7,"textarea",10),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.descripcionInductor=n)}),t.qZA(),t.TgZ(8,"label",11),t._uU(9,"Descripci\xf3n "),t.TgZ(10,"small",12)(11,"b"),t._uU(12," *"),t.qZA()()()(),t.YNc(13,E,3,0,"small",8),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(2),t.Akn(t.DdM(8,F)),t.Q6J("options",e.actividadesList())("showClear",!0)("ngModel",e.actividadSeleccionada),t.xp6(2),t.Q6J("ngIf",(null==e.actividadSeleccionada||null==e.actividadSeleccionada)&&e.formularioCompleto),t.xp6(3),t.Q6J("ngModel",e.descripcionInductor),t.xp6(6),t.Q6J("ngIf",(null==e.descripcionInductor||""==e.descripcionInductor||""==e.descripcionInductor)&&e.formularioCompleto)}}function k(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"p-button",13),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.actualizarInductor())}),t.qZA(),t.TgZ(1,"p-button",14),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.showDialog())}),t.qZA()}}const U=()=>({width:"800px",height:"600px"});let K=(()=>{class o{constructor(e,i){this.inductoresServices=e,this.actividadesServices=i,this.actualizarPadre=new t.vpe,this.showInductoresDialog=!1,this.actividadesList=(0,t.tdS)([]),this.formularioCompleto=!1}ngOnInit(){this.obtenerActividades()}showDialog(){this.obtenerActividades(),this.obtenerInductor(),this.showInductoresDialog=!this.showInductoresDialog}obtenerActividades(){this.actividadesServices.getActividades().pipe((0,r.K)(e=>(0,d._)(e.statusText))).subscribe(e=>{console.log(e),this.actividadesList.set(e.respuesta.datos)})}obtenerInductor(){this.inductoresServices.getInductor(this.idInductor).pipe((0,r.K)(e=>(0,d._)(e.statusText))).subscribe(e=>{console.log("ACA ",e),this.descripcionInductor=e.respuesta.datos.descripcion,this.actividadSeleccionada={id:e.respuesta.datos.idActividad,descripcion:e.respuesta.datos.actividad}})}setActividad(e){console.log(e),this.actividadSeleccionada=e}actualizarInductor(){this.formularioCompleto=!1,null!=this.descripcionInductor&&""!=this.descripcionInductor&&null!=this.actividadSeleccionada&&null!=this.actividadSeleccionada?(this.formularioCompleto=!1,this.inductoresServices.updateInductor({id:this.idInductor,descripcion:this.descripcionInductor,idActividad:this.actividadSeleccionada.id}).pipe((0,r.K)(i=>(0,d._)(i.statusText))).subscribe(i=>{console.log(i),this.descripcionInductor="",this.showDialog(),this.actualizarPadre.emit()})):this.formularioCompleto=!0}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(_),t.Y36(T.T))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["editar-inductores"]],inputs:{idInductor:"idInductor"},outputs:{actualizarPadre:"actualizarPadre"},decls:4,vars:9,consts:[["pTooltip","Editar inductor","icon","pi pi-pencil","severity","success",3,"disabled","onClick"],["header","Actualizar inductor",3,"visible","modal","responsive","draggable","resizable","visibleChange"],["pTemplate","body"],["pTemplate","footer"],[1,"p-fluid","p-formgrid","grid","mt-2"],[1,"field","col-12"],["id","actividadDrop","optionLabel","descripcion","placeholder","Seleccione la actividad",3,"options","showClear","ngModel","onChange"],["actividadDrop",""],["style","color: red",4,"ngIf"],[1,"p-float-label"],["rows","5","cols","30","pInputTextarea","","id","descripcion",3,"ngModel","ngModelChange"],["for","descripcion",1,"mb-2"],[2,"color","red"],["icon","pi pi-save","label","Guardar","severity","success",3,"click"],["icon","pi pi-times","label","Cancelar","severity","danger",3,"click"]],template:function(i,n){1&i&&(t.TgZ(0,"p-button",0),t.NdJ("onClick",function(){return n.showDialog()}),t.qZA(),t.TgZ(1,"p-dialog",1),t.NdJ("visibleChange",function(f){return n.showInductoresDialog=f}),t.YNc(2,P,14,9,"ng-template",2)(3,k,2,0,"ng-template",3),t.qZA()),2&i&&(t.Q6J("disabled",null==n.idInductor),t.xp6(1),t.Akn(t.DdM(8,U)),t.Q6J("visible",n.showInductoresDialog)("modal",!0)("responsive",!0)("draggable",!1)("resizable",!1))},dependencies:[v.O5,l.jx,h.zx,A.u,b.V,x.Lt,Z.g,p.Fj,p.JJ,p.On]})}return o})();var G=s(3904),L=s(7018);function Y(o,c){if(1&o&&(t.TgZ(0,"div",2),t._UZ(1,"i",3),t.TgZ(2,"p"),t._uU(3),t.qZA()()),2&o){const e=c.$implicit;t.xp6(3),t.Oqu(e.message)}}let j=(()=>{class o{constructor(e,i,n){this.inductoresServices=e,this.confirmationService=i,this.messageService=n,this.showInductoresDialog=!1,this.actualizarPadre=new t.vpe}confirm(){this.confirmationService.confirm({header:"Eliminar inductor",message:"\xbfDesea eliminar el inductor?",acceptIcon:"pi pi-check mr-2",rejectIcon:"pi pi-times mr-2",rejectButtonStyleClass:"p-button-danger p-button-sm ",acceptLabel:"Si",rejectLabel:"No",acceptButtonStyleClass:"p-button-success p-button-sm ",accept:()=>{this.eliminarInductor()},reject:()=>{this.messageService.add({severity:"error",summary:"Operaci\xf3n cancelada",detail:"No se ha eliminado el inductor",life:3e3})}})}eliminarInductor(){this.inductoresServices.deleteInductor(this.idInductor).pipe((0,r.K)(e=>{const i=e.status;return("400"==i||"404"==i||"500"==i||"401"==i)&&this.messageService.add({severity:"error",summary:"Error al procesar la informaci\xf3n",detail:"Favor contactar al departamento correspondiente"}),(0,d._)(e.statusText)})).subscribe(e=>{console.log(e),this.messageService.add({severity:"success",summary:"Inductor eliminado",detail:"Inductor eliminado correctamente",life:3e3}),setTimeout(()=>{this.showDialog(),this.actualizarPadre.emit()},3e3)})}showDialog(){this.showInductoresDialog=!this.showInductoresDialog}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(_),t.Y36(l.YP),t.Y36(l.ez))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["eliminar-inductores"]],inputs:{idInductor:"idInductor"},outputs:{actualizarPadre:"actualizarPadre"},features:[t._Bn([l.YP,l.ez])],decls:4,vars:0,consts:[["pTooltip","Eliminar inductor","icon","pi pi-trash","severity","danger",3,"onClick"],["pTemplate","message"],[1,"flex","flex-column","align-items-center","w-full","gap-3","border-bottom-1","surface-border"],[1,"pi","pi-exclamation-circle","text-6xl","text-primary-500"]],template:function(i,n){1&i&&(t.TgZ(0,"p-button",0),t.NdJ("onClick",function(){return n.confirm()}),t.qZA(),t._UZ(1,"p-toast"),t.TgZ(2,"p-confirmDialog"),t.YNc(3,Y,4,1,"ng-template",1),t.qZA())},dependencies:[l.jx,h.zx,A.u,G.Q,L.FN]})}return o})();function O(o,c){1&o&&(t.TgZ(0,"small",20)(1,"b"),t._uU(2,"Favor seleccione una actividad"),t.qZA()())}function Q(o,c){1&o&&(t.TgZ(0,"small",20)(1,"b"),t._uU(2,"Favor ingresar un nombre"),t.qZA()())}const q=()=>({"min-width":"500px"});function B(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div",12)(1,"div",13)(2,"p-dropdown",14,15),t.NdJ("onChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.setActividad(n.value))}),t.qZA(),t.YNc(4,O,3,0,"small",16),t.qZA(),t.TgZ(5,"div",13)(6,"span",17)(7,"textarea",18),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.descripcionInductor=n)}),t.qZA(),t.TgZ(8,"label",19),t._uU(9,"Nombre del inductor "),t.TgZ(10,"small",20)(11,"b"),t._uU(12," *"),t.qZA()()()(),t.YNc(13,Q,3,0,"small",16),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(2),t.Akn(t.DdM(8,q)),t.Q6J("options",e.actividadesList())("showClear",!0)("ngModel",e.actividadSeleccionada),t.xp6(2),t.Q6J("ngIf",(null==e.actividadSeleccionada||null==e.actividadSeleccionada)&&e.formularioCompleto),t.xp6(3),t.Q6J("ngModel",e.descripcionInductor),t.xp6(6),t.Q6J("ngIf",(null==e.descripcionInductor||""==e.descripcionInductor||""==e.descripcionInductor)&&e.formularioCompleto)}}function H(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"p-button",21),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.agregarInductor())}),t.qZA(),t.TgZ(1,"p-button",22),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.showDialog())}),t.qZA()}}function R(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div",23)(1,"button",24),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(),a=t.MAs(10);return t.KtG(n.clear(a))}),t.qZA(),t.TgZ(2,"span",25),t._UZ(3,"i",26),t.TgZ(4,"input",27,28),t.NdJ("input",function(){t.CHM(e);const n=t.MAs(5);t.oxw();const a=t.MAs(10);return t.KtG(a.filterGlobal(n.value,"contains"))}),t.qZA()()()}}function $(o,c){1&o&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Actividad"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Nombre del inductor"),t.qZA(),t.TgZ(5,"th",29),t._uU(6,"Operaciones"),t.qZA()())}function W(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"editar-inductores",30),t.NdJ("actualizarPadre",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.obtenerInductores())}),t.qZA(),t._uU(7," \xa0 "),t.TgZ(8,"eliminar-inductores",30),t.NdJ("actualizarPadre",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.obtenerInductores())}),t.qZA()()()}if(2&o){const e=c.$implicit;t.xp6(2),t.Oqu(e.actividad),t.xp6(2),t.Oqu(e.descripcion),t.xp6(2),t.Q6J("idInductor",e.id),t.xp6(2),t.Q6J("idInductor",e.id)}}const X=()=>({width:"800px",height:"600px"}),V=()=>({"min-width":"50rem"}),tt=()=>[5,10,20],et=()=>["actividad","descripcion","tiempoMinutos"],it=[{path:"",component:(()=>{class o{constructor(e,i){this.inductoresServices=e,this.actividadesServices=i,this.showInductoresDialog=!1,this.actividadesList=(0,t.tdS)([]),this.formularioCompleto=!1,this.inductoresList=[],this.showProceso=!1}ngOnInit(){var e=this;return(0,w.Z)(function*(){e.obtenerActividades(),e.obtenerInductores()})()}showDialog(){this.showInductoresDialog=!this.showInductoresDialog}obtenerActividades(){this.actividadesServices.getActividades().pipe((0,r.K)(e=>(this.showProceso=!1,(0,d._)(e.statusText)))).subscribe(e=>{this.actividadesList.set(e.respuesta.datos)})}obtenerInductores(){this.showProceso=!0,this.inductoresServices.getInductores().pipe((0,r.K)(e=>(this.showProceso=!1,(0,d._)(e.statusText)))).subscribe(e=>{this.showProceso=!1,this.inductoresList=e.respuesta.datos})}setActividad(e){console.log(e),this.actividadSeleccionada=e}agregarInductor(){this.showProceso=!0,this.formularioCompleto=!1,null!=this.descripcionInductor&&""!=this.descripcionInductor&&null!=this.actividadSeleccionada?(this.formularioCompleto=!1,this.inductoresServices.postInductor({descripcion:this.descripcionInductor,idActividad:this.actividadSeleccionada.id}).pipe((0,r.K)(i=>{const n=i.status;return("400"==n||"404"==n||"500"==n)&&console.log("EERROR"),this.showProceso=!1,(0,d._)(i.statusText)})).subscribe(i=>{this.obtenerInductores(),this.showProceso=!1,this.descripcionInductor="",this.actividadSeleccionada=null,this.showDialog()})):this.formularioCompleto=!0}clear(e){e.clear()}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(_),t.Y36(T.T))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-inductores"]],decls:14,vars:18,consts:[[3,"hidden"],["header","Inductores"],["header","Agregar inductor",3,"visible","modal","responsive","draggable","resizable","visibleChange"],["pTemplate","body"],["pTemplate","footer"],[1,"grid"],[1,"col-12"],["severity","success","label","Agregar inductor","icon","pi pi-plus",3,"onClick"],["currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords} inductores",3,"value","tableStyle","paginator","rowsPerPageOptions","rows","globalFilterFields"],["inductoresTabla",""],["pTemplate","caption"],["pTemplate","header"],[1,"p-fluid","p-formgrid","grid","mt-2"],[1,"field","col-12"],["id","actividadDrop","optionLabel","descripcion","placeholder","Seleccione la actividad",3,"options","showClear","ngModel","onChange"],["actividadDrop",""],["style","color: red",4,"ngIf"],[1,"p-float-label"],["rows","5","cols","30","pInputTextarea","","id","descripcion",3,"ngModel","ngModelChange"],["for","descripcion",1,"mb-2"],[2,"color","red"],["icon","pi pi-save","label","Guardar","severity","success",3,"click"],["icon","pi pi-times","label","Cancelar","severity","danger",3,"click"],[1,"flex"],["pButton","","label","Limpiar b\xfasqueda","icon","pi pi-filter-slash",1,"p-button-outlined",3,"click"],[1,"p-input-icon-left","ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar",3,"input"],["busquedaTabla",""],["colspan","1"],[3,"idInductor","actualizarPadre"]],template:function(i,n){1&i&&(t._UZ(0,"shared-loader",0),t.TgZ(1,"p-card",1)(2,"p-dialog",2),t.NdJ("visibleChange",function(f){return n.showInductoresDialog=f}),t.YNc(3,B,14,9,"ng-template",3)(4,H,2,0,"ng-template",4),t.qZA(),t.TgZ(5,"div",5)(6,"div",6)(7,"p-button",7),t.NdJ("onClick",function(){return n.showDialog()}),t.qZA()(),t.TgZ(8,"div",6)(9,"p-table",8,9),t.YNc(11,R,6,0,"ng-template",10)(12,$,7,0,"ng-template",11)(13,W,9,4,"ng-template",3),t.qZA()()()()),2&i&&(t.Q6J("hidden",!n.showProceso),t.xp6(2),t.Akn(t.DdM(14,X)),t.Q6J("visible",n.showInductoresDialog)("modal",!0)("responsive",!0)("draggable",!1)("resizable",!1),t.xp6(7),t.Q6J("value",n.inductoresList)("tableStyle",t.DdM(15,V))("paginator",!0)("rowsPerPageOptions",t.DdM(16,tt))("rows",10)("globalFilterFields",t.DdM(17,et)))},dependencies:[v.O5,y.Z,l.jx,D.iA,h.Hq,h.zx,b.V,x.Lt,J.o,Z.g,p.Fj,p.JJ,p.On,z.R,K,j]})}return o})()}];let ot=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#i=this.\u0275inj=t.cJS({imports:[C.Bz.forChild(it),C.Bz]})}return o})();var nt=s(5233),st=s(8137);let at=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#i=this.\u0275inj=t.cJS({imports:[v.ez,ot,nt.W,st.m]})}return o})()}}]);